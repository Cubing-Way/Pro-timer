const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/twips-YHXBF55O-B4Il3-wh.js","assets/comlink-CUk5F8at.js","assets/index-D2K3exc5.js","assets/index-DfB9eek-.css","assets/search-dynamic-sgs-side-events-GB4WAJ7I-Bc4qtocg.js","assets/chunk-ROB5TROI-DQTYdtQx.js","assets/search-dynamic-solve-4x4x4-NRWKTCNT-CIIhCejK.js","assets/search-dynamic-solve-fto-UZMNOI6U-B916BcW8.js","assets/search-dynamic-sgs-unofficial-2CECFBP3-CpkS9CVV.js","assets/search-dynamic-solve-kilominx-CD57C3C4-owJAbyh7.js","assets/search-dynamic-solve-master_tetraminx-GIS7T5B7-CgH1yFQR.js"])))=>i.map(i=>d[i]);
import{_ as v}from"./comlink-CUk5F8at.js";import{e as B}from"./chunk-2AUSVPAU-B6cZ_a8c.js";import{f as p,s as I,K,d,p as b,i as U,m as u,j as W,r as $,k as V,A as _,l as G,n as j,o as q,M as H,q as J}from"./index-D2K3exc5.js";var Q=2;function X(e,a){const t=[];for(const r of a){const n=new H(r);if(n.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let f=1;i=i.applyMove(n),!i.isIdentityTransformation();f++)t.push({move:n.modified({amount:f}),transformation:i})}return t}var y=class{constructor(e,a,t){this.kpuzzle=e,this.sgs=a,this.searchMoves=X(this.kpuzzle,t??Object.keys(this.kpuzzle.definition.moves))}searchMoves;async solve(e,a=Q,t){const r=e.experimentalToTransformation();if(!r)throw new Error("distinguishable pieces are not supported in tremble solver yt");let n=null,i=1e6;const f=(l,h,c)=>{if(h===0){const s=this.sgsPhaseSolve(l,i);if(!s)return;const w=c.concat(s).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:t}}),m=q(w);(n===null||m<i)&&(n=w,i=m);return}for(const s of this.searchMoves)f(l.applyTransformation(s.transformation),h-1,c.concat([s.move]))};for(let l=0;l<=a;l++)f(r,l,new _);if(n===null)throw new Error("SGS search failed.");return n}sgsPhaseSolve(e,a){const t=new j;let r=e;for(const n of this.sgs.ordering){const i=n.pieceOrdering;let f="";const l=r.invert();for(let c=0;c<i.length;c++){const s=i[c],w=s.orbitName,m=s.permutationIdx;f+=` ${l.transformationData[w].permutation[m]} ${l.transformationData[w].orientationDelta[m]}`}const h=n.lookup[f];if(!h)throw new Error("Missing algorithm in sgs or esgs?");if(t.experimentalPushAlg(h.alg),t.experimentalNumAlgNodes()>=a)return null;r=r.applyTransformation(h.transformation);for(let c=0;c<i.length;c++){const s=i[c],w=s.orbitName,m=s.permutationIdx;if(r.transformationData[w].permutation[m]!==m||r.transformationData[w].orientationDelta[m]!==0)throw new Error("bad SGS :-(")}}return t.toAlg()}},z=p(async()=>v(()=>import("./twips-YHXBF55O-B4Il3-wh.js"),__vite__mapDeps([0,1,2,3])));async function L(e,a,t){const{wasmTwips:r}=await z;return r(e,a,t)}async function Y(e){const{wasmRandomScrambleForEvent:a}=await z;return a(e)}async function Z(e,a,t){const{wasmDeriveScrambleForEvent:r}=await z;return r(e,a,t)}var S=p(()=>v(()=>import("./search-dynamic-sgs-side-events-GB4WAJ7I-Bc4qtocg.js"),__vite__mapDeps([4,1,5,2,3]))),P=null;async function ee(){return P||(P=(async()=>{const e=await(await S).cachedData222();return new y(await b["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function ae(){await ee()}async function te(e){return u(),L((await W.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var F=p(()=>v(()=>import("./search-dynamic-solve-4x4x4-NRWKTCNT-CIIhCejK.js"),__vite__mapDeps([6,2,1,3]))),re=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function ne(){return(await F).initialize()}async function A(){return u(),(await F).random444Scramble()}async function ie(){return G(await A(),re)}var oe=p(()=>v(()=>import("./search-dynamic-solve-fto-UZMNOI6U-B916BcW8.js"),__vite__mapDeps([7,2,1,3])));p(()=>v(()=>import("./search-dynamic-sgs-unofficial-2CECFBP3-CpkS9CVV.js"),__vite__mapDeps([8,5,2,1,3])));async function se(){return u(),new _(await(await oe).getRandomFTOScramble())}var ce=p(()=>v(()=>import("./search-dynamic-solve-kilominx-CD57C3C4-owJAbyh7.js"),__vite__mapDeps([9,2,1,3])));async function le(){return u(),(await ce).getRandomKilominxScramble()}var me=p(()=>v(()=>import("./search-dynamic-solve-master_tetraminx-GIS7T5B7-CgH1yFQR.js"),__vite__mapDeps([10,2,1,3])));async function ue(){return u(),new _(await(await me).randomMasterTetraminxScrambleString())}var fe=2,x=null;async function we(){return x||(x=(async()=>{const e=await(await S).cachedSGSDataMegaminx();return new y(await(await S).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function de(e){u();const a=await we(),t=structuredClone(e.patternData);t.CENTERS.orientation=new Array(12).fill(0);const r=new d(await(await S).cachedMegaminxKPuzzleWithoutMO(),t);return await a.solve(r,fe,()=>5)}var Se=3,M=null;async function ve(){return M||(M=(async()=>{const e=await(await S).sgsDataPyraminx();return new y(await b.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function pe(e){return u(),await(await ve()).solve(e,Se,()=>3)}var be=p(()=>v(()=>import("./search-dynamic-sgs-unofficial-2CECFBP3-CpkS9CVV.js"),__vite__mapDeps([8,5,2,1,3])));async function he(){return u(),(await be).getRandomRediCubeScramble()}var ye=3,R=null;async function ge(){return R||(R=(async()=>{const e=await(await S).sgsDataSkewb();return new y(await(await S).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function Ee(e){return new d(await(await S).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function Te(e){return u(),await(await ge()).solve(await Ee(e),ye,r=>r.family==="y"?4:3)}var _e=1e3;I(!0);var C=!0;function ze(e){C=e}function D(){return(typeof performance>"u"?Date:performance).now()}async function o(e,a,t){if(!C)return a();const r=D(),n=a();n?.then&&await n;const i=D();return console.warn(`${e}${t?.isPrefetch?" (prefetched)":""}: ${Math.round(i-r)}ms`),n}var g=new Map,E=null,O;async function k(e,a){return O=(async()=>{await O;function t(){return o(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>Y(e),{isPrefetch:a?.isPrefetch})}switch(e){case"222":return(await t()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"clock":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return t();case"333":case"333oh":case"333ft":return o("random333Scramble",V,{isPrefetch:a?.isPrefetch});case"333bf":case"333mbf":return o("random333OrientedScramble",$);case"444":return o("random444Scramble",A,{isPrefetch:a?.isPrefetch});case"444bf":return o("random444OrientedScramble",ie);case"fto":return o("randomFTOScramble",se,{isPrefetch:a?.isPrefetch});case"master_tetraminx":return o("randomMasterTetraminxScramble",ue);case"kilominx":return o("randomKilominxScramble",le,{isPrefetch:a?.isPrefetch});case"redi_cube":return o("randomRediCubeScramble",he,{isPrefetch:a?.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var T="auto",N={initialize:async e=>{switch(e){case"222":return o("preInitialize222",ae);case"333":case"333oh":case"333ft":return o("initialize333",J);case"444":return o("initialize444",ne);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){T=e},randomScrambleForEvent:async e=>{let a=g.get(e);return a?g.delete(e):a=k(e),T!=="none"&&a.then(()=>{E&&clearTimeout(E),E=setTimeout(()=>{g.set(e,k(e,{isPrefetch:!0}))},T==="immediate"?0:_e)}),a},randomScrambleStringForEvent:async e=>(await N.randomScrambleForEvent(e)).toString(),deriveScrambleStringForEvent:async(e,a,t)=>(await o(`deriveScrambleForEvent(â€¦, ${JSON.stringify(t)})`,()=>Z(e,a,t))).toString(),solve333ToString:async e=>{const a=new d(await b["3x3x3"].kpuzzle(),e);return(await U(a)).toString()},solve222ToString:async e=>{const a=new d(await b["2x2x2"].kpuzzle(),e);return(await te(a)).toString()},solveSkewbToString:async e=>{const a=new d(await b.skewb.kpuzzle(),e);return(await Te(a)).toString()},solvePyraminxToString:async e=>{const a=new d(await b.pyraminx.kpuzzle(),e);return(await pe(a)).toString()},solveMegaminxToString:async e=>{const a=new d(await b.megaminx.kpuzzle(),e);return(await de(a)).toString()},setDebugMeasurePerf:async e=>{ze(e)},solveTwipsToString:async(e,a,t)=>{const r=new K(e),n=new d(r,a);return(await L(e,n,t)).toString()}};B(N);
