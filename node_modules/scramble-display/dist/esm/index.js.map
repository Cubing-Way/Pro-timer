{
  "version": 3,
  "sources": ["../../src/scramble-display/ScrambleDisplay.ts", "../../src/scramble-display/css.ts"],
  "sourcesContent": ["import { Alg } from \"cubing/alg\";\nimport { eventInfo } from \"cubing/puzzles\";\nimport { TwistyPlayer } from \"cubing/twisty\";\nimport { mainStyleText } from \"./css\";\n\nexport type Visualization = \"2D\" | \"3D\";\n\ntype EventID = string;\n\nconst CUBE_333: EventID = \"333\";\nconst DEFAULT_EVENT: EventID = CUBE_333;\n\nexport type ScrambleDisplayAttributes = {\n  event?: EventID;\n  scramble?: string;\n  visualization?: Visualization;\n  checkered?: boolean;\n};\n\nexport type CachedAttributes = {\n  eventID: EventID | null;\n  scramble: Alg;\n  visualization: Visualization | null;\n  checkered: boolean;\n};\n\nexport class ScrambleDisplay extends HTMLElement {\n  #shadow: ShadowRoot;\n  #wrapper: HTMLDivElement = document.createElement(\"div\");\n  #currentAttributes: CachedAttributes = {\n    eventID: null,\n    scramble: new Alg(),\n    visualization: null,\n    checkered: false,\n  };\n  #twistyPlayer: TwistyPlayer = new TwistyPlayer({\n    controlPanel: \"none\",\n    hintFacelets: \"none\",\n    visualization: \"2D\",\n    background: \"none\",\n  });\n\n  // Note: You should avoid setting properties like `alg` or `visualization`\n  // directly on the twisty player, since `<scramble-display>` may overwrite\n  // them again. However, we make the player available this way in case you may\n  // find it convenient to have access for other purposes.\n  get player(): TwistyPlayer {\n    return this.#twistyPlayer;\n  }\n\n  // TODO: Accept ScrambleDisplayAttributes arg?\n  constructor() {\n    super();\n\n    this.#shadow = this.attachShadow({ mode: \"closed\" });\n    this.#wrapper.classList.add(\"wrapper\");\n    this.#shadow.appendChild(this.#wrapper);\n\n    // TODO: change style depending on event/view type?\n    const style = document.createElement(\"style\");\n    style.textContent = mainStyleText;\n    this.#shadow.appendChild(style);\n  }\n\n  connectedCallback(): void {\n    this.#wrapper.appendChild(this.#twistyPlayer);\n  }\n\n  public set event(eventID: EventID | null) {\n    const info = eventInfo(eventID ?? DEFAULT_EVENT);\n    this.#twistyPlayer.puzzle = info?.puzzleID ?? \"3x3x3\";\n    this.#currentAttributes.eventID = eventID;\n  }\n  public get event(): EventID | null {\n    return this.#currentAttributes.eventID;\n  }\n\n  public set scramble(scramble: Alg | string | null) {\n    const alg = new Alg(scramble ?? \"\");\n    this.#twistyPlayer.alg = alg;\n    this.#currentAttributes.scramble = alg;\n\n    this.#wrapper.setAttribute(\"title\", alg.toString());\n  }\n\n  public get scramble(): Alg {\n    return this.#currentAttributes.scramble;\n  }\n\n  public set visualization(visualization: Visualization | null) {\n    this.#twistyPlayer.visualization = visualization ?? \"2D\";\n    this.#currentAttributes.visualization = visualization;\n  }\n  public get visualization(): Visualization | null {\n    return this.#currentAttributes.visualization;\n  }\n\n  public set checkered(checkered: boolean) {\n    const checkeredBoolean = !!checkered;\n    this.#twistyPlayer.background = checkeredBoolean ? \"checkered\" : \"none\";\n    this.#currentAttributes.checkered = checkeredBoolean;\n  }\n  public get checkered(): boolean {\n    return this.#currentAttributes.checkered;\n  }\n\n  protected attributeChangedCallback(\n    name: string,\n    _oldValue: string,\n    newValue: string,\n  ) {\n    switch (name) {\n      case \"event\": {\n        this.event = newValue as EventID;\n        break;\n      }\n      case \"scramble\": {\n        this.scramble = newValue;\n        break;\n      }\n      case \"visualization\": {\n        this.visualization = newValue as Visualization;\n        break;\n      }\n      case \"checkered\": {\n        this.checkered = newValue !== null;\n        break;\n      }\n    }\n  }\n\n  protected static get observedAttributes(): Array<\n    keyof ScrambleDisplayAttributes\n  > {\n    return [\"event\", \"scramble\", \"visualization\", \"checkered\"];\n  }\n}\n\ncustomElements.define(\"scramble-display\", ScrambleDisplay);\n", "export const mainStyleText = `\n:host {\n  width: 384px;\n  height: 256px;\n  display: grid;\n}\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr;\n  place-content: center;\n  overflow: hidden;\n}\n\n.wrapper > * {\n  width: inherit;\n  height: inherit;\n  overflow: hidden;\n}\n\ntwisty-player {\n  width: 100%;\n  height: 100%;\n}\n`;\n"],
  "mappings": ";AAAA,SAAS,WAAW;AACpB,SAAS,iBAAiB;AAC1B,SAAS,oBAAoB;;;ACFtB,IAAM,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ADS7B,IAAM,WAAoB;AAC1B,IAAM,gBAAyB;AAgBxB,IAAM,kBAAN,cAA8B,YAAY;AAAA,EAC/C;AAAA,EACA,WAA2B,SAAS,cAAc,KAAK;AAAA,EACvD,qBAAuC;AAAA,IACrC,SAAS;AAAA,IACT,UAAU,IAAI,IAAI;AAAA,IAClB,eAAe;AAAA,IACf,WAAW;AAAA,EACb;AAAA,EACA,gBAA8B,IAAI,aAAa;AAAA,IAC7C,cAAc;AAAA,IACd,cAAc;AAAA,IACd,eAAe;AAAA,IACf,YAAY;AAAA,EACd,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,IAAI,SAAuB;AACzB,WAAO,KAAK;AAAA,EACd;AAAA;AAAA,EAGA,cAAc;AACZ,UAAM;AAEN,SAAK,UAAU,KAAK,aAAa,EAAE,MAAM,SAAS,CAAC;AACnD,SAAK,SAAS,UAAU,IAAI,SAAS;AACrC,SAAK,QAAQ,YAAY,KAAK,QAAQ;AAGtC,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,cAAc;AACpB,SAAK,QAAQ,YAAY,KAAK;AAAA,EAChC;AAAA,EAEA,oBAA0B;AACxB,SAAK,SAAS,YAAY,KAAK,aAAa;AAAA,EAC9C;AAAA,EAEA,IAAW,MAAM,SAAyB;AACxC,UAAM,OAAO,UAAU,WAAW,aAAa;AAC/C,SAAK,cAAc,SAAS,MAAM,YAAY;AAC9C,SAAK,mBAAmB,UAAU;AAAA,EACpC;AAAA,EACA,IAAW,QAAwB;AACjC,WAAO,KAAK,mBAAmB;AAAA,EACjC;AAAA,EAEA,IAAW,SAAS,UAA+B;AACjD,UAAM,MAAM,IAAI,IAAI,YAAY,EAAE;AAClC,SAAK,cAAc,MAAM;AACzB,SAAK,mBAAmB,WAAW;AAEnC,SAAK,SAAS,aAAa,SAAS,IAAI,SAAS,CAAC;AAAA,EACpD;AAAA,EAEA,IAAW,WAAgB;AACzB,WAAO,KAAK,mBAAmB;AAAA,EACjC;AAAA,EAEA,IAAW,cAAc,eAAqC;AAC5D,SAAK,cAAc,gBAAgB,iBAAiB;AACpD,SAAK,mBAAmB,gBAAgB;AAAA,EAC1C;AAAA,EACA,IAAW,gBAAsC;AAC/C,WAAO,KAAK,mBAAmB;AAAA,EACjC;AAAA,EAEA,IAAW,UAAU,WAAoB;AACvC,UAAM,mBAAmB,CAAC,CAAC;AAC3B,SAAK,cAAc,aAAa,mBAAmB,cAAc;AACjE,SAAK,mBAAmB,YAAY;AAAA,EACtC;AAAA,EACA,IAAW,YAAqB;AAC9B,WAAO,KAAK,mBAAmB;AAAA,EACjC;AAAA,EAEU,yBACR,MACA,WACA,UACA;AACA,YAAQ,MAAM;AAAA,MACZ,KAAK,SAAS;AACZ,aAAK,QAAQ;AACb;AAAA,MACF;AAAA,MACA,KAAK,YAAY;AACf,aAAK,WAAW;AAChB;AAAA,MACF;AAAA,MACA,KAAK,iBAAiB;AACpB,aAAK,gBAAgB;AACrB;AAAA,MACF;AAAA,MACA,KAAK,aAAa;AAChB,aAAK,YAAY,aAAa;AAC9B;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAqB,qBAEnB;AACA,WAAO,CAAC,SAAS,YAAY,iBAAiB,WAAW;AAAA,EAC3D;AACF;AAEA,eAAe,OAAO,oBAAoB,eAAe;",
  "names": []
}
